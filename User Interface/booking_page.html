<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyVroom | Booking Page</title>
    <link rel="icon" href="/Pictures/myvroom logo.jpeg">
    <link rel="stylesheet" href="/User Interface/header_footer_stylesheet.css">
    <style>
        /* NAVIGATION BAR */

        #booking_nav_link{
            font-weight: bold;
            color: black;
        }

        /* ------------------------------------------------------------------------------------------------------------------------------------- */
        /* SECTION & FILTER*/

        section{
            display: flex;
            gap: 20px;
        }

        .filter_aside{
            padding: 0 20px 100px 20px;
            display: block;
            background-color: #DEEEF5;
            box-shadow: 2px 0px 5px #c4c4c4;
        }

        .filter_sections{
            margin-bottom: 20px;
        }

        .filter_form{
            padding: 5px 10px
        }

        .filter_sections h3{
            margin-bottom: 5px;
        }

        .filter_aside hr{
            opacity: 50%;
        }


        /* ------------------------------------------------------------------------------------------------------------------------------------- */
        /* RENTAL COST */

        #rental_cost_range {
            display: flex;
            gap: 10px; 
            align-items: center;
            width: fit-content; 
            padding: 5px;
        }

        #rental_cost_range .filter_form {
            display: flex;
            align-items: center;
            border: none;
            padding: 0;
        }

        #rental_cost_range input {
            width: 60px;
            margin-left: 5px;
        }

        /* ------------------------------------------------------------------------------------------------------------------------------------- */
        /* SEARCH BUTTON */

        #search_button{
            height: 50px;
            margin-top: 50px;
            text-align: center;
            align-content: center;
        }

        #search_button button{
            background-color: #FDF8DF;
            border-color: #327390;
            border-radius: 20px;
            padding: 10px 70px;
            font-size: 17px;
            width: calc(100% - 30px);
        }

        #search_button button:hover{
            background-color: #e3dec8;
            font-weight: bold;
            width: calc(100% - 20px);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        /* ------------------------------------------------------------------------------------------------------------------------------------- */
        /* CATELOG LIST OF CARS */

        .catelog_aside{
            width: 100%;
            padding: 20px;
        }

        /* ------------------------------------------------------------------------------------------------------------------------------------- */
        /* SEARCH CONTAINER */

        .search_container{
            display: flex;
            gap: 50px;
            justify-content: center;
            align-items: flex-end;
            margin-bottom: 20px;
        }

        .search_startdate h5, .search_enddate h5{
            margin: 0;
            padding: 10px 5px;
        }

        .search_bar{
            border: 2px solid #c4c4c4;
            border-radius: 100px;
            display: flex;
            align-items: center;
            width: 400px;
            height: 35px;
            padding: 0 15px;
            gap: 15px;
            box-shadow: 2px 2px 5px grey;
            background-color: #EEFAFF;
        }

        #search-bar{
            background-color: #EEFAFF;
            border-style: none;
        }

        #search-bar:focus{
            outline: none;
        }

        .search_container input{
            width: 150px;
            height: 30px;
            border-radius: 5px;
            padding-left: 5px;
            font-size: 15px;
            border: 2px solid #c4c4c4;
        }

        /* ------------------------------------------------------------------------------------------------------------------------------------- */
        /* CAR LISTINGS */

        .car_list{
            margin: 50px 20px;
            display: block;
            width: fit-content;
            justify-self: center;
        }

        .loading{
            opacity: 50%;;
        }

        /* ------------------------------------------------------------------------------------------------------------------------------------- */
        /* CAR CARD */

        .car_card{
            border: 2px solid black;
            padding: 20px;
            margin-bottom: 20px;
            max-width: 1105px;
            width: 1105px;
            border-radius: 20px;
            display: inline-flex;
            justify-content: space-between;
            box-shadow: 5px 5px 5px #c4c4c4;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .car_card:hover{
            transform: translateY(-5px);
            box-shadow: 8px 8px 5px #c4c4c4;
        }

        .card_section1{
            display: flex;
            gap: 20px;
        }

        .card_section2{
            max-width: 265px;
        }

        .car_image{
            border: 2px solid #c4c4c4;
            width:fit-content;
            display: flex;
            align-items: center;
        }

        .car_image img{
            height: 150px;
            max-width: 345px;
        }

        .car_desc{
            width: 470px;
        }

        .car_name h1{
            font-size: 25px;           
        }

        /* CAR ACCESSORIES */

        .car_accessories{
            width: 460px;
            height: fit-content;
            display: flex;
            flex-wrap: wrap;
            padding-left: 5px;
        }

        .car_accessories_item{
            display: flex;
            gap: 5px;
            width: 180px;
            padding: 5px 0;
            margin-bottom: 10px;
        }

        .seating_name, .type_name, .fuel_name, .luggage_name, .aircon_name, .transmission_name{
            font-weight: bold;
        }

        .seating_image img{
            width: 18px;
            height: auto;
        }

        .type_image img{
            width: 20px;
            height: auto;
        }

        .fuel_image img{
            width: 18px;
            height: auto;
        }

        .luggage_image img{
            width: 18px;
            height: auto;
        }

        .aircon_image img{
            width: 20px;
            height: auto;
        }

        .transmission_image img{
            width: 18px;
            height: auto;
        }

        /* CAR SERIAL NUMBER */

        .car_number{
            border: 1px solid black;
            font-weight: bold;
            width: fit-content;
            padding: 5px 20px 5px 5px;
            max-width: 120px;
        }

        .card_section2{
            text-align: end;
        }

        .car_feedback{
            display: flex;
            gap: 10px;
        }

        .car_reviews h1{
            font-size: 22px;
            margin: 0;
            padding: 0;
            margin-bottom: 10px;
        }

        .car_rating{
            font-weight: bold;
            display: flex;
            align-items: center;
        }

        #car-rating{
            border: 2px solid #9AB7FF;
            border-radius: 10px;
            background-color: #9AB7FF;
            padding: 10px 10px;
        }

        .car_price_booknow{
            margin-top: 50px;
        }

        .car_price{
            font-size: 20px;
            padding: 10px 0;
        }

        .car_driver{
            margin-bottom: 20px;
        }

        /* BOOK BUTTON */

        .book_now_button{
            width: auto;
            height: 45px;
            text-align: center;
            align-content: center;
        }

        .book_now_button button{
            padding: 10px 30px;
            width: 98%;
            background-color: #FFED27;
            border: 2px solid #e3d21b;
            border-radius: 12px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.1s ease;
        }

        .book_now_button button:hover{
            width: 100%;
            padding: 12px 0;
            background-color: #f0df22;
            border: 2px solid #cfbf19;
            font-size: 15px;
        }

        /* ------------------------------------------------------------------------------------------------------------------------------------- */
        /* FOOTER */

        .footer_base{
            margin: 0;
        }

    </style>
    <script>
        // FLASH MESSAGE
        function showMessage(message = "This message will disappear in 3 seconds", duration = 3000) {
            const flashMessage = document.getElementById('flashMessage');
            flashMessage.textContent = message;
            flashMessage.classList.add('show');
            flashMessage.classList.remove('hide');
            
            setTimeout(() => {
                flashMessage.classList.remove('show');
                flashMessage.classList.add('hide');
            }, duration);
        }

        function logout(event) {
            event.preventDefault(); // Prevent immediate navigation
            if (confirm("Do you want to log out?")) {
                showMessage("Logging out...", 2000);
                // After message disappears, proceed with logout
                setTimeout(() => {
                    window.location.href = event.target.getAttribute('href');
                }, 2000);
            }
        }
    </script>
</head>
<body>
    <!-- NAVIGATION BAR -->
    <nav>
        <img src="/Pictures/myvroom_black and white.png" alt="MyVroom" class="logo">

        <!-- NAVIGATION ITEMS -->
        <div class="navigation_items_container" id="first_nav_container">
            <!-- MAIN -->
            <div class="navigation_items" id="main_nav">
                <a href="/User Interface/main_page.html" id="main_nav_link">Main</a>
            </div>
            <!-- BOOKING -->
            <div class="navigation_items" id="booking_nav">
                <a href="/User Interface/booking_page.html" id="booking_nav_link">Booking <i class="fa fa-caret-down"></i></a>
                <div class="booking_dropdown-contents">
                    <a href="/User Interface/booking_page.html" class="book-a-car">Book a Car</a>
                    <a href="/User Interface/booking_history_page.html" class="booking-histroy">Booking History</a>
                </div>
            </div>
            <!-- CONTACT US -->
            <div class="navigation_items" id="contact-us_nav">
                <a href="/User Interface/contact_page.html" id="contactUs_nav_link">Contact Us</a>
            </div>
        </div>

        <!-- NAVIGATION ITEMS -->
        <div class="navigation_items_container" id="second_nav_container">
            <!-- CHATBOX -->
            <div class="navigation_items2" id="chatbox_nav">
                <a href="" class="chatbox"><img src="/Pictures/bubble-chat.png" alt="Chatbox"></a>
            </div>
            <!-- NOTIFICATION -->
            <div class="navigation_items2" id="notification_nav">
                <a href="" class="notification"><img src="/Pictures/notification_icon.png" alt="Notification"></a>
            </div>
            <!-- PROFILE -->
            <div class="navigation_items2" id="profile_nav">
                <a href="" class="profile"><img src="/Pictures/profile_icon.jpg" alt="Profile" id="nav_profile_picture"></a>
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        const savedImage = localStorage.getItem('profileImage');
                        if (savedImage) {
                            const profileImg = document.getElementById('nav_profile_picture');
                            if (profileImg) {
                                profileImg.src = savedImage;
                            }
                        }
                    });
                </script>

                <div class="profile_dropdown-contents">
                    <a href="/User Interface/profile_page.html" class="account_nav">Account</a>
                    <a href="/User Interface/help_page.html" class="help_nav">Help</a>
                    <a href="/User Interface/feedback_page.html" class="feedback_nav">Feedback</a>
                    <hr>
                    <a href="/User Interface/user_login_page.html" class="logout_nav" onclick="logout(event)">Log Out</a>
                </div>
            </div>
        </div>
    </nav>
    <section>
        <!-- FILTERS -->
        <aside class="filter_aside">
            <!-- FILTER -->
            <div class="filter_sections" id="filters">
                <h3><b>Filters</b></h3>
                <div class="filter_form">
                    <input type="checkbox" id="economy_option" name="economy_option">
                    <label for="economy_option">Economy Option</label>
                </div>
                <div class="filter_form">
                    <input type="checkbox" id="air-con" name="air-con">
                    <label for="air-con">Air Conditioning</label>
                </div>
            </div>
            <hr>
            <!-- RENTAL COST -->
            <div class="filter_sections" id="rental_cost">
                <h3><b>Rental Cost</b></h3>
                <div class="filter_form">
                    <input type="checkbox" id="per_day" name="per_day">
                    <label for="per_day">Per Day</label>
                </div>
                <div class="filter_form">
                    <input type="checkbox" id="per_week" name="per_week">
                    <label for="per_week">Per Week</label>
                </div>
                <div class="filter_form">
                    <input type="checkbox" id="per_month" name="per_month">
                    <label for="per_month">Per Month</label>
                </div><br>
                <div class="filter_form" id="rental_cost_range">
                    <!-- MINIMUM -->
                    <div class="filter_form" id="rental_min_cost">
                        <label for="min_cost">Min: </label>
                        <input type="number" id="min_cost" name="min_cost">
                    </div>

                    <!-- MAXIMUM -->
                    <div class="filter_form" id="rental_max_cost">
                        <label for="max_cost">Max: </label>
                        <input type="number" id="max_cost" name="max_cost">
                    </div>
                </div>
            </div>
            <hr>
            <!-- CAR RATING -->
            <div class="filter_sections" id="car_rating">
                <h3><b>Car Rating</b></h3>
                <div class="filter_form">
                    <input type="checkbox" id="any" name="any">
                    <label for="any">Any</label>
                </div>
                <div class="filter_form">
                    <input type="checkbox" id="top_rated" name="top_rated">
                    <label for="top_rated">Top Rated</label>
                </div>
                <div class="filter_form">
                    <input type="checkbox" id="good" name="good">
                    <label for="good">Good</label>
                </div>
                <div class="filter_form">
                    <input type="checkbox" id="average" name="average">
                    <label for="average">Average</label>
                </div>
            </div>
            <hr>
            <!-- CAR CLASS -->
            <div class="filter_sections" id="car_class">
                <h3><b>Car Class</b></h3>
                <div class="filter_form">
                    <input type="checkbox" id="basic" name="basic">
                    <label for="basic">Basic</label>
                </div>
                <div class="filter_form">
                    <input type="checkbox" id="standard" name="standard">
                    <label for="standard">Standard</label>
                </div>
                <div class="filter_form">
                    <input type="checkbox" id="premium" name="premium">
                    <label for="premium">Premium</label>
                </div>
                <div class="filter_form">
                    <input type="checkbox" id="luxury" name="luxury">
                    <label for="luxury">Luxury</label>
                </div>
                <div class="filter_form">
                    <input type="checkbox" id="suv" name="suv">
                    <label for="suv">SUV</label>
                </div>
            </div>
            <hr>
            <!-- DRIVER OPTION -->
            <div class="filter_sections" id="driver_option">
                <h3><b>Driver Option</b></h3>
                <div class="filter_form">
                    <input type="checkbox" id="include_driver" name="include_driver">
                    <label for="include_driver">Include Driver</label>
                </div>
                <div class="filter_form">
                    <input type="checkbox" id="no_driver" name="no_driver">
                    <label for="no_driver">No Driver</label>
                </div>
            </div>
            <hr>
            <!-- SEARCH BUTTON -->
            <div class="filter_sections" id="search_button">
                <button onclick="">Search</button>
            </div>
        </aside>

        <aside class="catelog_aside">
            <div class="search_container">
                <div class="search_startdate">
                    <h5>Start Date</h5>
                    <input type="date" id="startdate" name="startdate">
                </div>
                <div class="search_enddate">
                    <h5>End Date</h5>
                    <input type="date" id="enddate" name="enddate">
                </div>
                <div class="search_bar">
                    <img src="/Pictures/search icon.png" alt="Search">
                    <input type="text" id="search-bar" name="search-bar" placeholder="Search for car...">
                    
                </div>
            </div>

            <!-- CAR LISTING -->
            <div class="car_list" id="car_listing">
                <div class="loading">Loading available cars...</div>
                
            </div>
            <script>
                // Sample car
                const sampleCars = {
                    id: 1,
                    model: "Car Model 1",
                    seating: 5,
                    type: "Standard",
                    fuelType: "Petrol",
                    luggage: 3,
                    aircon: true,
                    transmission: "Auto",
                    rating: 0.0,
                    total_reviews: 0,
                    price: 40,
                    image: "/Pictures/toyota corolla.png"
                };

                // GET CAR LISTING CONTAINER
                const carListing = document.getElementById('car_listing');

                // CREATE CAR CARD
                function createCarCard(car) {
                const card = document.createElement('div');
                card.className = 'car_card';
                
                card.innerHTML = `
                    <div class="card_section1">
                    <div class="car_image">
                        <img src="${car.image || '/Pictures/toyota corolla.png'}" alt="${car.model}">
                    </div>
                    <div class="car_desc">
                        <div class="car_name">
                        <h1>${car.model}</h1>
                        </div>

                        <div class="car_accessories">
                        <div class="car_accessories_item" id="car_seating">
                            <div class="seating_image">
                            <img src="/Pictures/seating_profile_icon.png" alt="Seatings">
                            </div>
                            <div class="seating_name" id="seating-name">${car.seating || car.seats} person</div>
                        </div>

                        <div class="car_accessories_item" id="car_type">
                            <div class="type_image">
                            <img src="/Pictures/car_icon.png" alt="Type">
                            </div>
                            <div class="type_name" id="type-name">${car.type}</div>
                        </div>

                        <div class="car_accessories_item" id="fuel_type">
                            <div class="fuel_image">
                            <img src="/Pictures/fuel_type.png" alt="Fuel Type">
                            </div>
                            <div class="fuel_name" id="fuel-name">${car.fuelType}</div>
                        </div>

                        <div class="car_accessories_item" id="luggage_size">
                            <div class="luggage_image">
                            <img src="/Pictures/travel-luggage.png" alt="Luggage Size">
                            </div>
                            <div class="luggage_name" id="luggage-name">${car.luggage}</div>
                        </div>

                        <div class="car_accessories_item" id="aircon_available">
                            <div class="aircon_image">
                            <img src="/Pictures/air-conditioner.png" alt="Air Conditioning">
                            </div>
                            <div class="aircon_name" id="aircon-name">${car.aircon || (car.airConditioning ? 'Available' : 'None')}</div>
                        </div>

                        <div class="car_accessories_item" id="transmission_type">
                            <div class="transmission_image">
                            <img src="/Pictures/transmission.png" alt="Transmission Type">
                            </div>
                            <div class="transmission_name" id="transmission-name">${car.transmission}</div>
                        </div>
                        </div>

                        <div class="car_number">
                        # <span id="car_id">${car.id}</span>
                        </div>
                    </div>
                    </div>
                    <div class="card_section2">
                    <div class="car_feedback">
                        <div class="car_reviews">
                        <h1>Ratings </h1>
                        <span id="total-reviews">${car.total_reviews || 0} reviews</span>
                        </div>
                        <div class="car_rating">
                        <span id="car-rating">${car.rating || 'N/A'}</span>
                        </div>
                    </div>
                    <div class="car_price_booknow">
                        <div class="car_price">
                        <b>RM <span id="car-price">${car.price}</span></b>
                        </div>
                        <div class="car_driver">
                        <span id="car-driver">${car.driverCount || 1}</span> Driver
                        </div>

                        <div class="book_now_button">
                        <button onclick="handleBookNow(${car.id})"><b>BOOK NOW</b></button>
                        </div>
                    </div>
                    </div>
                `.replace(/\s+/g, ' ').trim();

                return card;
                }

                // DISPLAY CARS
                function displayCars(cars){
                    carListing.innerHTML = '';

                    if (!cars || cars.length === 0){
                        carListing.innerHTML = '<div class="loading">No cars available at the moment.</div>';
                        return;
                    }

                    cars.forEach(car => {
                        const card = createCarCard(car);
                        carListing.appendChild(card);
                    });
                }

                // HANDLE BOOKING
                function handleBookNow(carId){
                    alert(`Booking car with ID: ${carId}`);
                }

                // MOCK API FETCH FUNTION: CHANGE LATER
                async function fetchCars(){
                    // fetch from backend (example)
                    // const response = await fetch('api/cars');
                    // return await response.json();

                    // for demo
                    return new Promise(resolve => {
                        setTimeout(() => {
                            resolve(sampleCars);
                        }, 500);
                    });
                }

                // INITIALIZE THE PAGE
                async function init(){
                    try{
                        const cars = await fetchCars();
                        displayCars(cars);
                    }
                    catch(error){
                        console.error('Error loading cars: ', error);
                        carListing.innerHTML = '<div class="loading">Error loading cars. Please try again...</div>';
                    }
                }

                // START THE APP WHEN PAGE LOADED
                document.addEventListener('DOMContentLoaded', init);
                
            </script>
        </aside>
    </section>

    <!-- FOOTER -->
    <footer>
        <div class="footer_base">
            <div class="footer_container">

                <!-- ABOUT US -->
                <div class="footer_items" id="about_us">
                    <h3>About Us</h3>
                    <p>
                        In 2023, a group of travel enthusiasts and tech innovators noticed a frustrating trend: renting a car was either overly complicated, expensive, or outdated. 
                        Driven by the belief that mobility should be simple, affordable, and tech-savvy, the team launched MyVroom—a next-gen car rental platform. 
                    </p>
                </div>

                <!-- CONTENTS -->
                <div class="footer_items" id="contents">
                    <h3>Contents</h3>

                    <div class="content_items_container">
                        <div class="content_items">
                            <ul>
                                <li><a href="/User Interface/main_page.html">Main Page</a></li>
                                <li><a href="/User Interface/booking_page.html">Booking Page</a></li>
                                <li><a href="/User Interface/contact_page.html">Contact Us</a></li>
                            </ul>
                        </div>

                        <div class="content_items">
                            <ul>
                                <li><a href="/User Interface/profile_page.html">Profile Page</a></li>
                                <li><a href="/User Interface/help_page.html">Help</a></li>
                                <li><a href="/User Interface/feedback_page.html">Feedback</a></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- FOLLOW US   -->
                <div class="footer_items" id="follow_us">
                    <h3>Follow Us</h3>

                    <div class="follow_us_container">
                        <a href=""><img src="/Pictures/Facebook_icon.svg.png" alt="Facebook" id="facebook"></a>
                        <a href=""><img src="/Pictures/Instagram_icon.png" alt="Instagram" id="instagram"></a>
                        <a href=""><img src="/Pictures/X_icon.webp" alt="X" id="x"></a>
                        <a href=""><img src="/Pictures/tiktok_icon.webp" alt="TikTok" id="tiktok"></a>
                    </div>
                </div>

                <!-- CONTACT US -->
                <div class="footer_items" id="contact_us">
                    <h3>Contact Us</h3>

                    <div class="contact_us_container">
                        <div class="contact_us_items" id="mail">
                            <img src="/Pictures/mail_icon.webp" alt="Email">
                            <div class="contact_us_details" id="email_address">
                                helpdesk@myvroom.com
                            </div>
                        </div>

                        <div class="contact_us_items" id="phone">
                            <img src="/Pictures/phone_icon.webp" alt="Phone">
                            <div class="contact_us_details" id="phone_number">
                                6012-3456789
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- FLASH MESSAGE -->
    <div id="flashMessage" class="flash-message"></div>
</body>
</html>